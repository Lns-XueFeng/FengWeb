{% extends "base.html" %}

{% block title %} Pie｜Music {% endblock %}

{% block name %} <h3>音乐 <span>列表</span></h3> {% endblock %}

{% block content %}

<div class="arlo_tm_section" id="services">
	<div class="arlo_tm_services">
		<div class="container">
			<hr>
			<div class="service_inner">
				<ul>
                    {% for music in music_list %}
                        <li class="wow fadeInLeft" data-wow-duration="1.5s">
                            <div class="inner" style="text-align:center">
                                <img class="svg" src="{{ url_for('static', filename='/images/1.svg') }}" alt="" />
                                <div>
                                    <audio id="{{ 'audio'+music[0] }}" src="/static/musics/{{ music[1] }}.mp3" preload="auto"></audio>
                                </div>
                                <div style="text-align:center">
                                    <h5 id = "{{ 'music_name'+music[0] }}">{{ music[1] }}</h5>
                                    <button id="{{ 'btn_play'+music[0] }}">点击播放</button>
                                    <button id="{{ 'btn_stop'+music[0] }}">点击暂停</button>
                                </div>
                            </div>
                        </li>
                    {% endfor %}
				</ul>
                <hr>
			</div>
		</div>
	</div>
</div>

<script>
    let li_list = document.getElementsByTagName("li");
    let count = 1;
    for (i in li_list){
        let audio = document.getElementById("audio"+count);
        let btn_play = document.getElementById("btn_play"+count);
        let btn_stop = document.getElementById("btn_stop"+count);

        btn_play.addEventListener('click', function (){
            if(audio.paused){
                audio.play();
            }
        })

        btn_stop.addEventListener('click', function (){
            if(audio.played){
                audio.pause();
            }
        })
        count = count + 1
    }
</script>

{% endblock %}

{% block music %} {% endblock %}

